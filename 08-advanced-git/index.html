<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>Advanced Versioning Techniques</title>
<meta name="description" content="Submodules, rebasing, squashing, cherry-picking">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="/Course-Laboratory-of-Software-Systems/reveal-js/css/reset.css">
<link rel="stylesheet" href="/Course-Laboratory-of-Software-Systems/reveal-js/css/reveal.css">
  <link rel="stylesheet" href="/Course-Laboratory-of-Software-Systems/css/custom-theme.min.0ab8c954a02adc8ff8cfc306d8ab3bd3463c057f69a5aaef066c5efaa444854e.css" id="theme"><link rel="stylesheet" href="/Course-Laboratory-of-Software-Systems/highlight-js/default.min.css">
    
<link rel="stylesheet" href="https://gitcdn.link/repo/DanySK/css-blur-animation/master/blur.css">
<link href='https://fonts.googleapis.com/css?family=Roboto Mono' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Oxygen Mono' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Ubuntu Mono' rel='stylesheet'>

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="hahahugoshortcode-s0-hbhb">Laboratory of Software Systems</h1>
<h2 id="advanced-versioning-techniques">Advanced Versioning Techniques</h2>
<h3 id="danilo-pianinimailtodanilopianiniuniboit"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini</a></h3>
2022-04-11

</section><section>
<h1 id="annotated-tagging">Annotated Tagging</h1>
<p>Git supports two types of tags:</p>
<ul>
<li><strong>lightweight</strong> tags
<ul>
<li><em>default option</em></li>
<li>simply a name for an object (usually a commit)</li>
<li>meant for creating <strong>private</strong> or <strong>temporary</strong> annotations!</li>
</ul>
</li>
<li><strong>annotated</strong> tags
<ul>
<li>Produced with <code>-a</code> (unsigend), <code>-s</code>, or <code>-u</code> options</li>
<li>Creates a <em>new object</em></li>
<li>Contain <em>message</em>, <em>creation date</em>, <em>tagger name</em> and <em>email</em>, and an optional <em>signature</em></li>
<li>Annotated tags are <strong>meant for release</strong></li>
<li>Some commands (most notably, <code>git describe</code>) ignore lightweight tags by default</li>
</ul>
</li>
</ul>
</section><section>
<h1 id="signing-commits">Signing commits</h1>
<p>Nice people <em>signs</em> commits, certifying their authorship.</p>
<ul>
<li>Signed commits appear with a ✅
 on GitHub</li>
</ul>
<p>If you do not have a signature yet, <a href="https://central.sonatype.org/pages/working-with-pgp-signatures.html">time to create one</a></p>
<ul>
<li>Creation: <code>gpg --gen-key</code></li>
<li>List: <code>gpg --list-keys</code></li>
<li>Distribution: <code>gpg --keyserver hkp://pool.sks-keyservers.net --send-keys</code></li>
</ul>
<p>Once you have a private key to sign with, you can configure Git to use it for signing things by setting the user.signingkey config setting.</p>
<p><code>git config --global user.signingkey &lt;YOUR_KEY_ID&gt;</code></p>
</section><section>
<h1 id="stashing">Stashing</h1>
<p>Classic situation:</p>
<ol>
<li>Work on some project, have the project in inconsistent state</li>
<li>Something needs to be fixed on another branch</li>
</ol>
<p>$\Rightarrow$ You don&rsquo;t want to have commits half-way, but you can&rsquo;t lose what you have done&hellip;</p>
<h2 id="git-stash-to-the-rescue"><code>git stash</code> to the rescue</h2>
<p>Stashing takes the dirty state of the working directory and saves it on a <strong>stack</strong> of <em>unfinished changes</em> that you can <em>reapply at any time</em></p>
<ul>
<li>application on different branches allowed!</li>
</ul>
</section><section>
<h2 id="practical-stashing">Practical stashing</h2>
<ul>
<li><code>git stash</code>
<ul>
<li><strong>Pushes</strong> <em>all</em> dangling changes (staged or unstaged) to the stash</li>
</ul>
</li>
<li><code>git stash list</code>
<ul>
<li><strong>Shows</strong> all the accumulated stashes</li>
</ul>
</li>
<li><code>git stash apply [stash@{N}] [--index]</code>
<ul>
<li>No option specified: <strong>Re-applies</strong>, <em>without removing</em> from the stash, the <em>latest</em> stashed change</li>
<li>If <code>stash@{N}</code>, applies the <em>N-th</em> stashed change</li>
<li>If <code>--index</code> is specified, the changes that were staged at the time of push get <em>re-staged</em></li>
</ul>
</li>
<li><code>git stash drop stash@{N}</code>
<ul>
<li><strong>Deletes</strong> the <em>N-th</em> stashed change</li>
</ul>
</li>
<li><code>git stash pop</code>
<ul>
<li><strong>Re-applies</strong> <em>the most recent</em> stash, <em>removing</em> it from the stash</li>
<li>Same as <code>git stash apply &amp;&amp; git stash drop stash@{0}</code></li>
</ul>
</li>
</ul>
</section><section>
<h1 id="advanced-merging">Advanced merging</h1>
<ul>
<li>In classic merging, diverging branches are reunited through a <strong>merge commit</strong></li>
</ul>
<p><img src="basic-rebase-1.png" alt=""></p>
</section><section>
<h1 id="advanced-merging-1">Advanced merging</h1>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="nohighlight" data-noescape>git checkout master
git merge experiment
</code></pre></div><p><img src="basic-rebase-2.png" alt=""></p>
</section><section>
<h1 id="advanced-merging-rebase">Advanced merging: rebase</h1>
<ul>
<li>Merging is not the only way to reunite diverging branches</li>
<li>We may want, for instance, to simulate that <code>C4</code> was developed after <code>C3</code>
<ul>
<li>For instance, because it was on a separate part of the codebase</li>
</ul>
</li>
<li>Merging <em>forces</em> to record the creation and reunion of a development line, but in some cases it may be undesirable
<ul>
<li>Project history <em>hard to understand</em> because of too many merges</li>
<li>The separation was actually a successful small experiment</li>
</ul>
</li>
</ul>
<p><strong>Rebasing</strong> provides a way to alter the project history by <em>changing the parent</em>  of (re-base) existing commits</p>
</section><section>
<h1 id="advanced-merging-rebase-1">Advanced merging: rebase</h1>
<p><img src="basic-rebase-1.png" alt=""></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="nohighlight" data-noescape>git checkout experiment
git rebase master
</code></pre></div></section><section>
<h1 id="advanced-merging-rebase-2">Advanced merging: rebase</h1>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="nohighlight" data-noescape>git checkout experiment
git rebase master
</code></pre></div><p><img src="basic-rebase-3.png" alt=""></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="nohighlight" data-noescape>git checkout master
git merge experiment <span style="color:#888"># Fast forward!</span>
</code></pre></div><p><img src="basic-rebase-4.png" alt=""></p>
</section><section>
<h1 id="advanced-rebasing">Advanced rebasing</h1>
<p><img src="interesting-rebase-1.png" alt=""></p>
<p>We want to leave <code>server</code> as is, but rebase <code>client</code> onto <code>master</code></p>
</section><section>
<h1 id="advanced-rebasing-1">Advanced rebasing</h1>
<p>Option <code>--onto</code> can be used to transplant entire branches</p>
<ul>
<li><code>git rebase --onto destination start end</code>
<ul>
<li>pick commits from <code>start</code> to <code>end</code></li>
<li>reply them starting from <code>destination</code></li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="nohighlight" data-noescape>git rebase --onto master server client
</code></pre></div><p><img src="interesting-rebase-2.png" alt=""></p>
<p>Reads: <em>pick all commits from <code>server</code> (excluded) to <code>client</code> (included), remove them and reply them starting from <code>master</code></em></p>
</section><section>
<h1 id="rebase-pull">Rebase pull</h1>
<p><code>pull</code> is a non-atomic operation:</p>
<ol>
<li><code>git fetch</code></li>
<li><code>git merge FETCH_HEAD</code></li>
</ol>
<p>There is no reason why the operation of branch joining must be <code>merge</code>: it could well be <code>rebase</code>!</p>
<ol>
<li><code>git fetch</code></li>
<li><code>git rebase FETCH_HEAD</code></li>
</ol>
<p><em>Both operations</em> are actually supported! The full commands would be:</p>
<ul>
<li><code>git pull --merge</code> $\Rightarrow$ default behaviour (in old <code>git</code> versions)</li>
<li><code>git pull --rebase</code> $\Rightarrow$ reunite using rebase!</li>
</ul>
<p><strong>Note:</strong> new versions of git require configuration and do not start with merge as default!</p>
<ul>
<li><code>git config --global pull.rebase [true/false]</code></li>
</ul>
</section><section>
<h1 id="perils-of-rebasing">Perils of rebasing</h1>
<blockquote>
<p><strong>Do not rebase commits that exist outside your repository</strong></p>
</blockquote>
<p>Rebasing <em>rewrites the project history</em> and as such generates <em>incompatible histories</em></p>
<ul>
<li>Remote pushes may get <em>refused</em>!</li>
<li>pushing with <code>--force</code> <em>rewrites history remotely</em> and <strong>may delete other people&rsquo;s commits</strong>!</li>
<li><code>git pull --rebase</code> is safe, if the local commits where never pushed in any remote
<ul>
<li>It is actually a good practice to default to it</li>
<li><code>git config --global pull.rebase true</code></li>
</ul>
</li>
</ul>
</section><section>
<h1 id="rebasing-or-merging">Rebasing or merging?</h1>
<p>Select depending on what you <em>conceptually</em> want:</p>
<ul>
<li>I want to <strong>record of what actually happened</strong>: then <strong>merge</strong>
<ul>
<li>History is preserved</li>
<li>Messy commits are there</li>
</ul>
</li>
<li>I want to <strong>tell the story of how your project was made</strong>: then <strong>rebase</strong>
<ul>
<li>History is <em>modified</em></li>
<li>Commits are cleaner</li>
</ul>
</li>
</ul>
<p>They tell two stories:</p>
<ul>
<li><em>rebase</em> is the book</li>
<li><em>merge</em> is the story of how the book was written</li>
</ul>
</section><section>
<h1 id="squashing">Squashing</h1>
<p>Squashing is the practice of <em>reassembling multiple commits into a single one</em></p>
<ul>
<li>Allows to forget &ldquo;experimental&rdquo; commits</li>
<li>Allows to merge temporary changes into a single one</li>
<li><em>Simplifies</em> history</li>
<li><em>Alters</em> history</li>
<li>Can be performed via <code>merge</code> or manually</li>
</ul>
</section><section>
<h1 id="squashing-manually">Squashing manually</h1>
<p>

  


<figure>
  <img
    src='https://g.gravizo.com/svg?%0a%20%20digraph%20G%20%7b%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20C1%20-%3e%20C2%20-%3e%20C3%20-%3e%20C4%20-%3e%20C5%20-%3e%20C6%20%5bdir%3dback%5d%3b%0a%20%20%20%20HEAD%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20C6%20-%3e%20HEAD%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%7d%0a'
    alt=''
    />
    <figcaption></figcaption>
</figure>

<code>git reset --soft HEAD~4</code>


  


<figure>
  <img
    src='https://g.gravizo.com/svg?%0a%20%20digraph%20G%20%7b%0a%20%20%20%20graph%5bsplines%3dortho%5d%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20C1%0a%20%20%20%20C1%20-%3e%20C2%20%20%5bdir%3dback%5d%0a%20%20%20%20%7brank%3dsame%3b%20C2%2c%20HEAD%7d%0a%20%20%20%20HEAD%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20C3%20%5bstyle%3ddashed%5d%3b%0a%20%20%20%20C4%20%5bstyle%3ddashed%5d%3b%0a%20%20%20%20C5%20%5bstyle%3ddashed%5d%3b%0a%20%20%20%20C6%20%5bstyle%3ddashed%5d%3b%0a%20%20%20%20C2%20-%3e%20C3%20-%3e%20C4%20-%3e%20C5%20-%3e%20C6%20%5bstyle%3ddashed%2c%20dir%3dback%5d%3b%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20C2%20-%3e%20HEAD%20%5bdir%3dback%2c%20weight%3d0%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%7d%0a'
    alt=''
    />
    <figcaption></figcaption>
</figure>

<code>git commit</code>


  


<figure>
  <img
    src='https://g.gravizo.com/svg?%0a%20%20digraph%20G%20%7b%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20C1%20-%3e%20C2%20-%3e%20%22C3%27%22%20%5bdir%3dback%5d%3b%0a%20%20%20%20HEAD%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20%22C3%27%22%20%5bstyle%3dfilled%2c%20fillcolor%3dred%5d%0a%20%20%20%20%22C3%27%22%20-%3e%20HEAD%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%7d%0a'
    alt=''
    />
    <figcaption></figcaption>
</figure>
</p>
</section><section>
<h1 id="squashing-with-merge">Squashing with merge</h1>
<p>

  


<figure>
  <img
    src='https://g.gravizo.com/svg?%0a%20%20digraph%20G%20%7b%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20C1%20-%3e%20C2%20-%3e%20C3%20-%3e%20C4%20-%3e%20C5%20-%3e%20C6%20%5bdir%3dback%5d%3b%0a%20%20%20%20HEAD%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20master%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20%7brank%3dsame%3b%20master%2c%20HEAD%7d%0a%20%20%20%20C6%20-%3e%20HEAD%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20C6%20-%3e%20master%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%7d%0a'
    alt=''
    />
    <figcaption></figcaption>
</figure>

<code>git branch target</code>


  


<figure>
  <img
    src='https://g.gravizo.com/svg?%0a%20%20digraph%20G%20%7b%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20C1%20-%3e%20C2%20-%3e%20C3%20-%3e%20C4%20-%3e%20C5%20-%3e%20C6%20%5bdir%3dback%5d%3b%0a%20%20%20%20HEAD%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20master%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20target%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20%7brank%3dsame%3b%20master%2c%20target%2c%20HEAD%7d%0a%20%20%20%20C6%20-%3e%20HEAD%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20C6%20-%3e%20master%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20C6%20-%3e%20target%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%7d%0a'
    alt=''
    />
    <figcaption></figcaption>
</figure>

<code>git reset --hard HEAD~4</code>


  


<figure>
  <img
    src='https://g.gravizo.com/svg?%0a%20%20digraph%20G%20%7b%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20master%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20C1%20-%3e%20C2%20-%3e%20C3%20-%3e%20C4%20-%3e%20C5%20-%3e%20C6%20%5bdir%3dback%5d%3b%0a%20%20%20%20HEAD%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20target%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20%7brank%3dsame%3b%20C2%2c%20master%7d%0a%20%20%20%20%7brank%3dsame%3b%20C3%2c%20HEAD%7d%0a%20%20%20%20C2%20-%3e%20HEAD%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20C2%20-%3e%20master%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20C6%20-%3e%20target%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%7d%0a'
    alt=''
    />
    <figcaption></figcaption>
</figure>
</p>
</section><section>
<h1 id="squashing-with-merge-1">Squashing with merge</h1>
<p>

  


<figure>
  <img
    src='https://g.gravizo.com/svg?%0a%20%20digraph%20G%20%7b%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20master%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20C1%20-%3e%20C2%20-%3e%20C3%20-%3e%20C4%20-%3e%20C5%20-%3e%20C6%20%5bdir%3dback%5d%3b%0a%20%20%20%20HEAD%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20target%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20%7brank%3dsame%3b%20C2%2c%20master%7d%0a%20%20%20%20%7brank%3dsame%3b%20C3%2c%20HEAD%7d%0a%20%20%20%20C2%20-%3e%20HEAD%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20C2%20-%3e%20master%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20C6%20-%3e%20target%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%7d%0a'
    alt=''
    />
    <figcaption></figcaption>
</figure>

<code>git merge --squash target</code>


  


<figure>
  <img
    src='https://g.gravizo.com/svg?%0a%20%20digraph%20G%20%7b%0a%20%20%20%20compound%3dtrue%3b%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20master%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20C1%20-%3e%20C2%20%5bdir%3dback%5d%0a%20%20%20%20C2%20-%3e%20C3%20%5bweight%3d2%2c%20dir%3dback%5d%0a%20%20%20%20C2%20-%3e%20%22C3%27%22%20%5bweight%3d1%5d%0a%20%20%20%20%22C3%27%22%20%5bstyle%3dfilled%2c%20fillcolor%3dred%5d%0a%20%20%20%20subgraph%20cluster_0%20%7b%0a%20%20%20%20%20%20%20%20C3%20-%3e%20C4%20-%3e%20C5%20-%3e%20C6%20%5bdir%3dback%5d%3b%0a%20%20%20%20%20%20%20%20color%3dred%0a%20%20%20%20%20%20%20%20style%3ddashed%0a%20%20%20%20%7d%0a%20%20%20%20%22C3%27%22%20-%3e%20C4%20%5blhead%3dcluster_0%2c%20style%3d%22dashed%22%2c%20dir%3dback%2c%20color%3dred%5d%0a%20%20%20%20HEAD%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20target%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20%22C3%27%22%20-%3e%20HEAD%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20%22C3%27%22%20-%3e%20master%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20C6%20-%3e%20target%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20%7brank%3dsame%3b%20C2%2c%20master%7d%0a%20%20%20%20%7brank%3dsame%3b%20%22C3%27%22%2c%20HEAD%7d%0a%20%20%7d%0a'
    alt=''
    />
    <figcaption></figcaption>
</figure>

<code>git branch -d target</code>


  


<figure>
  <img
    src='https://g.gravizo.com/svg?%0a%20%20digraph%20G%20%7b%0a%20%20%20%20rankdir%3dLR%3b%0a%20%20%20%20C1%20-%3e%20C2%20-%3e%20%22C3%27%22%20%5bdir%3dback%5d%3b%0a%20%20%20%20HEAD%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20%22C3%27%22%20%5bstyle%3dfilled%2c%20fillcolor%3dred%5d%0a%20%20%20%20%22C3%27%22%20-%3e%20HEAD%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%20%20master%20%5bstyle%3d%22filled%2csolid%22%2c%20shape%3dbox%2c%20fillcolor%3dorange%5d%3b%0a%20%20%20%20%22C3%27%22%20-%3e%20master%20%5bdir%3dback%2c%20penwidth%3d4%2c%20color%3dorange%5d%3b%0a%20%20%7d%0a'
    alt=''
    />
    <figcaption></figcaption>
</figure>
</p>
</section><section>
<h1 id="squash-merge-or-rebase">Squash, merge, or rebase?</h1>
<p>Squashing results in <em>further alteration</em> than rebase</p>
<p><strong>Merge</strong> when you want to <em>retain history</em>, keeping track of what happened</p>
<p><strong>Rebase</strong> only when you are the only one with the commits, to favor <em>linearity</em></p>
<p><strong>Squash</strong> when some of the commits are somewhat &ldquo;tests&rdquo;, points in time you do not want to get back to anyway</p>
</section><section>
<h1 id="cherry-picking">Cherry picking</h1>
<p>Selecting and importing a single commit (or commit range) from another branch</p>
<p><code>git cherry-pick &lt;tree-ish&gt;</code></p>
<ul>
<li>Picks <code>&lt;tree-ish&gt;</code> and adds it to <code>HEAD</code></li>
<li>If <code>&lt;tree-ish&gt;</code> is a branch name, cherry picks the last commit of the branch</li>
</ul>
<p><code>git cherry-pick from..to</code></p>
<ul>
<li>cherry picks commit range from ref <code>from</code> to ref <code>to</code></li>
</ul>
<p>Cherry picking is often useful for applying <em>fixes</em> or <em>patches</em> which are in development from other branches.</p>
</section><section>
<h1 id="submodules">Submodules</h1>
<p>Using <em>a repository within another repository</em></p>
<p>Typical use:</p>
<ul>
<li><em>Templating</em>
<ul>
<li>see e.g. these slides</li>
</ul>
</li>
<li><em>Aggregation</em>
<ul>
<li>A &ldquo;master project&rdquo; working as container of multiple other projects</li>
</ul>
</li>
<li>A <em>direct dipendency</em> on an unreleased or in-development library</li>
<li>The project cannot be managed with an <em>integrated hierarchial tool</em>
<ul>
<li>No Gradle or Maven or similar</li>
<li>If a build tool can deal with dependencies, then let it do its job</li>
</ul>
</li>
</ul>
</section><section>
<h1 id="git-submodule">Git Submodule</h1>
<p>Adding an external submodule:</p>
<ul>
<li><code>git submodule add &lt;REPO_URL&gt; &lt;DESTINATION&gt;</code>
<ul>
<li><em>Prefer HTTPS</em>: SSH requires public key authorization, and hosts have limitations</li>
<li>Creates or modifies the <code>.gitmodules</code> file in the repository root</li>
<li>Creates a new special file <code>&lt;DESTINATION&gt;</code></li>
<li>Both <code>.gitmodules</code> and <code>&lt;DESTINATION&gt;</code> <strong>must be tracked</strong></li>
<li>Clones the current repository status at <code>&lt;DESTINATION&gt;</code></li>
</ul>
</li>
<li>Contents of the submodules <strong>are not tracked</strong>, but <strong>linked</strong></li>
<li>A project can have <em>multiple</em> submodules</li>
<li><em>Nested</em> submodules are possible</li>
</ul>
</section><section>
<h2 id="importing-a-repository-with-submodules">Importing a repository with submodules</h2>
<p>A plain <code>clone</code> does not initialize submodules. Special care applies.</p>
<p><code>git clone --recurse-submodules &lt;URL&gt; &lt;DESTINATION&gt;</code></p>
<ul>
<li>Besides performing the clone, also recursively initialize submodules</li>
</ul>
<p>If the repository has been cloned plainly, then submodules can be initialized manually</p>
<p><code>git submodule update --init --recursive</code></p>
</section><section>
<h2 id="working-with-submodules">Working with submodules</h2>
<p><code>git submodule update --remote --recursive</code></p>
<ul>
<li>Recursively updates all submbodules</li>
<li>It <em>must</em> be executed also <strong>after a pull</strong>
<ul>
<li><em>Pulling does not update submodules by default</em></li>
</ul>
</li>
</ul>
<p>Changes into submodules are dealt with as if they were on a <em>separate repository</em></p>
<p><code>foreach</code> can be used to <em>run some command on all modules</em></p>
<ul>
<li>e.g., <code>git submodule foreach git pull</code></li>
<li><em>recursive behavior</em> can be obtained with <code>--recurse-submodules</code></li>
</ul>
</section><section>
<h2 id="removing-submodules">Removing submodules</h2>
<p>No single built-in command 😑
</p>
<ol>
<li>De-init the submodule</li>
</ol>
<p><code>git submodule deinit -f -- sub/module/path</code></p>
<ol start="2">
<li>Cleanup the submodule worktree (otherwise, it will be impossible to re-add the module in future, as the repository will appear corrupted)</li>
</ol>
<p><code>rm -rf .git/modules/sub/module/path</code></p>
<ol start="3">
<li>Remove the files from the work tree</li>
</ol>
<p><code>git rm -f sub/module/path</code></p>
<p><strong>Note</strong>: Do not use a trailing slash on the submodule path when using these commands!</p>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src=/Course-Laboratory-of-Software-Systems/reveal-hugo/object-assign.js></script>

<a href="/Course-Laboratory-of-Software-Systems/reveal-js/css/print/" id="print-location" style="display: none;"></a>
<script type="text/javascript">
  var printLocationElement = document.getElementById('print-location');
  var link = document.createElement('link');
  link.rel = 'stylesheet';
  link.type = 'text/css';
  link.href = printLocationElement.href + (window.location.search.match(/print-pdf/gi) ? 'pdf.css' : 'paper.css');
  document.getElementsByTagName('head')[0].appendChild(link);
</script>

<script type="application/json" id="reveal-hugo-site-params">{"height":"100%","pdfseparatefragments":false,"theme":"white","width":"100%"}</script>
<script type="application/json" id="reveal-hugo-page-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"transition":"slide","transition_speed":"fast"}</script>

<script src="/Course-Laboratory-of-Software-Systems/reveal-js/js/reveal.js"></script>

<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }
  
  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams));
  Reveal.initialize(options);
</script>


  
  
  <script type="text/javascript" src="/Course-Laboratory-of-Software-Systems/reveal-js/plugin/markdown/marked.js"></script>
  
  <script type="text/javascript" src="/Course-Laboratory-of-Software-Systems/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/Course-Laboratory-of-Software-Systems/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/Course-Laboratory-of-Software-Systems/reveal-js/plugin/zoom-js/zoom.js"></script>
  
  
  <script type="text/javascript" src="/Course-Laboratory-of-Software-Systems/reveal-js/plugin/notes/notes.js"></script>



    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

    
  </body>
</html>
